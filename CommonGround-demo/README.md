# CommonGround - Co-Parenting Platform Demo

A comprehensive demo of AI-powered tools for co-parenting, featuring:
1. **Custody Agreement Generator** - Create and manage agreements
2. **ARIA Agreement Assistant** - Chatbot to understand your agreement  
3. **ARIA Sentiment Shield** - Monitor messaging for hostility
4. **CG ClearFundâ„¢** - Structured expense requests
5. **CG Court Export** - Court-ready documentation packages
6. **CG Legal Access** - Controlled access for GALs, Attorneys, Courts

---

## ğŸš€ Quick Start

```bash
pip install -r requirements.txt

python app.py               # Custody agreement generator
python aria_demo.py         # Agreement assistant chatbot
python shield_demo.py       # Sentiment Shield messaging
python clearfund_demo.py    # ClearFund expense requests
python court_demo.py        # Court export packages
python legal_access_demo.py # Legal Access Mode (NEW)
```

---

## ğŸ¬ Recommended Demo Order

For the full CommonGround experience:

1. **`shield_demo.py`** - Show how parents communicate with guardrails
2. **`clearfund_demo.py`** - Show structured expense requests
3. **`court_demo.py`** - Show how this becomes court evidence
4. **`legal_access_demo.py`** - Show how courts/attorneys access it

---

## âš–ï¸ Legal Access Mode (NEW)

**The feature that makes courts recommend CommonGround.**

```bash
python legal_access_demo.py
```

### What It Does

Gives GALs, Attorneys, Mediators, and Court Staff controlled, time-limited, 
read-only access to case information - without turning CommonGround into 
a "third parent" or letting anyone tamper with records.

### Roles Supported

| Role | Icon | Default Duration | What They Can Do |
|------|------|------------------|------------------|
| Guardian ad Litem | ğŸ‘¤ | 120 days | Full read access, add legal notes, export packets |
| Attorney (Petitioner) | âš–ï¸ | 90 days | Case review, evidence prep, export packets |
| Attorney (Respondent) | âš–ï¸ | 90 days | Case review, evidence prep, export packets |
| Mediator / Evaluator | ğŸ¤ | 60 days | Conflict patterns, mediation summaries |
| Court Clerk | ğŸ“‹ | 30 days | Quick verification, packet validation |
| Judge | ğŸ›ï¸ | 30 days | Clean facts, no opinions |

### Demo Flow (5-10 minutes)

**Scene 1: Parent Grants Access**
```
Marcus â†’ Case Settings â†’ Add Legal Access â†’ Guardian ad Litem
  âœ“ Selects scope (schedule, check-ins, messages, financials)
  âœ“ Sets date range (last 6 months)
  âœ“ Jennifer approves (joint consent)
  âœ“ Access link generated
```

**Scene 2: GAL Verification**
```
GAL receives link â†’ Completes verification:
  âœ“ Government ID verified
  âœ“ Appointment letter verified
  âœ“ MFA enabled (required)
  âœ“ Access agreement signed
```

**Scene 3: GAL Dashboard**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š COMPLIANCE SNAPSHOT (Last 90 Days)                             â”‚
â”‚                                                                    â”‚
â”‚    Exchange Compliance     Financial         Communication        â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚ Marcus:   96%   â”‚    â”‚ On-time: 92%â”‚   â”‚ Flags: 30 â†‘     â”‚   â”‚
â”‚    â”‚ Jennifer: 77%   â”‚    â”‚ Owed: $0    â”‚   â”‚ Escalating      â”‚   â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Scene 4: One-Click Court Packet**
```
GAL clicks "Generate Court Packet" â†’

  âœ“ PDF Report (24 pages)
  âœ“ Evidence Index (156 items)
  âœ“ Chain of Custody Log
  âœ“ Integrity Hash (SHA-256)
  âœ“ Watermarked for: Sarah Mitchell, GAL
```

**Scene 5: Court Verifies Integrity**
```
Clerk visits: verify.commonground.family/PKT-20251226-4827

  âœ“ Hash verified - content unchanged
  âœ“ Chain of custody confirmed
  âœ“ Generated by verified professional
  âœ“ Packet is authentic
```

### Security Features

- **MFA Required** - No exceptions
- **Read-Only** - Cannot edit, delete, or tamper
- **Logged** - Every click is a breadcrumb
- **Watermarked** - Exports show who/when
- **Time-Limited** - Auto-expires, requires renewal
- **Scope-Limited** - Only see what's granted

### Why Courts Will Care

| Without CommonGround | With CommonGround |
|---------------------|-------------------|
| Screenshots and chaos | Standardized packets |
| "He said / she said" | Timestamped facts |
| Missing documents | Evidence index |
| No verification | Hash-verified integrity |
| Hours decoding drama | Minutes reviewing facts |

---

## ğŸ“¦ Six Demo Components

### 1. ğŸ“ Custody Agreement Generator (`app.py`)
- 18-section comprehensive interview
- Database tracking with version control
- Two-parent approval workflow

### 2. ğŸ’¬ ARIA Agreement Assistant (`aria_demo.py`)
- Grounded responses from the agreement only
- Financial calculations, date awareness
- Never takes sides

### 3. ğŸ›¡ï¸ Sentiment Shield (`shield_demo.py`)
- Real-time message analysis
- Gentle interventions with suggestions
- Trend analytics

### 4. ğŸ’° CG ClearFundâ„¢ (`clearfund_demo.py`)
- Structured expense requests
- Agreement-aware splits
- Full audit trail

### 5. âš–ï¸ CG Court Export (`court_demo.py`)
- Investigation packages (claim-specific)
- Court packages (comprehensive)
- Redacted intervention logs
- Chain of custody

### 6. ğŸ›ï¸ CG Legal Access (`legal_access_demo.py`)
- Controlled professional access
- Credential verification
- One-click court packets
- Integrity verification

---

## ğŸ—‚ï¸ Sample Data

All demos use the **Williams Family** case:
- Marcus (Petitioner) vs Jennifer (Respondent)
- Children: Eric (6), Maya (4)
- 50/50 custody, Friday exchanges

**Demonstrates:**
- Marcus: 96% exchange compliance, 75% ARIA acceptance
- Jennifer: 77% exchange compliance, 28% ARIA acceptance (declining)
- 3 incomplete handoffs, 2 severe communication flags
- Full financial records via ClearFund

---

## ğŸ”§ Project Structure

```
custody-demo/
â”œâ”€â”€ app.py                    # Agreement generator
â”œâ”€â”€ aria_demo.py              # ARIA assistant
â”œâ”€â”€ shield_demo.py            # Sentiment Shield
â”œâ”€â”€ clearfund_demo.py         # ClearFund demo
â”œâ”€â”€ court_demo.py             # Court export demo
â”œâ”€â”€ legal_access_demo.py      # Legal Access demo (NEW)
â”‚
â”œâ”€â”€ aria/
â”‚   â”œâ”€â”€ agent.py              # ARIA chatbot
â”‚   â”œâ”€â”€ tools.py              # Search, calculator, dates
â”‚   â”œâ”€â”€ sample_agreements.py  # Williams & Johnson
â”‚   â”œâ”€â”€ sentiment_shield.py   # Toxicity detection
â”‚   â”œâ”€â”€ message_store.py      # Messaging analytics
â”‚   â”œâ”€â”€ clearfund.py          # ClearFund models
â”‚   â”œâ”€â”€ clearfund_store.py    # ClearFund database
â”‚   â”œâ”€â”€ court_export.py       # Court report generators
â”‚   â””â”€â”€ legal_access.py       # Legal Access models (NEW)
â”‚
â”œâ”€â”€ agents/                   # Agreement generator agents
â”œâ”€â”€ database/                 # SQLAlchemy models
â””â”€â”€ schemas/                  # Pydantic models
```

---

## ğŸ’¡ The Big Picture

**Without Legal Access Mode:**
- CommonGround = "an app parents use"
- Nice to have

**With Legal Access Mode:**
- CommonGround = "infrastructure that makes MY job easier"
- Courts recommend it
- Attorneys request it
- GALs rely on it

The killer demo moment: **"Generate Court Packet" takes 30 seconds.** 

That's when people ask: *"Why isn't this standard?"*

---

## âš™ï¸ Configuration

```bash
# Optional: For full AI features
export OPENAI_API_KEY="your-key"
# OR
export ANTHROPIC_API_KEY="your-key"
```

Demo mode works without API keys.

---

Built with â¤ï¸ for families navigating co-parenting together.

*"CommonGround does not decide outcomes. We preserve reality."*
