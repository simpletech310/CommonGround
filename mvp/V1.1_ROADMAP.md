# CommonGround V1.1 Development Roadmap

**Timeline:** 6 weeks (January - February 2025)
**Current Status:** MVP Complete ‚Üí V1.1 Development
**Goal:** Production-ready platform with differentiating features

---

## üìã Overview

V1.1 builds on the completed MVP with production polish, deployment, and four major feature additions that differentiate CommonGround from competitors:

1. **ClearFund‚Ñ¢** - Payment tracking and shared expense management
2. **Court Export Packages** - Generate court-ready documentation
3. **Legal Access Portal** - Time-limited professional access
4. **Email Notifications** - Automated event notifications

---

## üóìÔ∏è Timeline & Phases

### **Week 13-14: MVP Polish & Launch Prep**
**Goal:** Production-ready MVP with full integration

#### Backend Integration (Week 13)
- [ ] **Agreement Builder API**
  - Create `POST /api/v1/agreements/{id}/sections` endpoint
  - Support creating individual sections dynamically
  - Update section validation logic
  - Test section creation workflow

- [ ] **Schedule Generation from Agreement**
  - Parse parenting schedule section ‚Üí recurring events
  - Parse holiday schedule ‚Üí special date events
  - Parse exchange logistics ‚Üí exchange procedures
  - Auto-generate compliance rules from agreement

- [ ] **Enhanced Error Handling**
  - Improve error messages across all endpoints
  - Add request validation with better feedback
  - Implement retry logic for external API calls

#### Frontend Polish (Week 14)
- [ ] **Agreement Wizard Enhancements**
  - Add date pickers for all date fields
  - Improve select dropdowns with search
  - Add rich text editing for textarea fields
  - Implement draft auto-save (every 30 seconds)
  - Add "Jump to Section" dropdown
  - Build agreement summary/preview page

- [ ] **Mobile Responsive Improvements**
  - Test all pages on mobile devices
  - Fix layout issues on small screens
  - Optimize touch targets (buttons, links)
  - Test calendar on mobile

- [ ] **UX Polish**
  - Replace loading spinners with skeletons
  - Add toast notifications for all actions
  - Implement keyboard shortcuts
  - Add confirmation dialogs for destructive actions
  - Improve empty states with helpful CTAs

#### Testing & QA (Week 14)
- [ ] **End-to-End Testing**
  - Test complete user flow: Register ‚Üí Create Case ‚Üí Invite ‚Üí Build Agreement ‚Üí Approve ‚Üí Schedule
  - Test all ARIA intervention paths
  - Test agreement approval workflow
  - Test schedule generation and check-ins
  - Cross-browser testing (Chrome, Firefox, Safari)

- [ ] **Production Deployment**
  - Deploy backend to Railway
  - Deploy frontend to Vercel
  - Configure environment variables
  - Set up Supabase production instance
  - Configure custom domain
  - Set up SSL certificates
  - Test production environment

---

### **Week 15-16: Core V1.1 Features**
**Goal:** Build differentating features

#### ClearFund‚Ñ¢ Payment Tracking (Week 15)

**Backend:**
```python
# New endpoints
POST   /api/v1/payments/                  # Record payment
GET    /api/v1/payments/case/{case_id}    # Get payment history
POST   /api/v1/expenses/                  # Submit expense request
PUT    /api/v1/expenses/{id}/approve      # Approve expense
PUT    /api/v1/expenses/{id}/reject       # Reject expense
GET    /api/v1/expenses/case/{case_id}    # Get expenses
GET    /api/v1/ledger/case/{case_id}      # Get balance/ledger
```

**Database Models:**
```python
# payments table
- id, case_id, payer_id, recipient_id
- amount, payment_date, payment_method
- category (child_support, medical, childcare, school, extracurricular)
- status (pending, completed, failed)
- receipt_url, notes

# expenses table
- id, case_id, submitted_by, amount
- category, description, date_incurred
- receipt_url, status (pending, approved, rejected, paid)
- approved_by, approved_at, paid_at
- split_percentage (default 50/50)
```

**Frontend:**
- `/expenses` page with tabs: Submit | Pending | History | Balance
- Submit expense form with receipt upload
- Expense approval/rejection interface
- Payment recording form
- Balance tracker showing what's owed
- Payment history table with filters

**Priority:** HIGH - User-requested feature

---

#### Court Export Packages (Week 15-16)

**Backend:**
```python
# New endpoint
POST   /api/v1/exports/court-package    # Generate court package
GET    /api/v1/exports/{id}/download     # Download package
GET    /api/v1/exports/case/{case_id}    # List exports

# court_exports table
- id, case_id, created_by, export_type
- start_date, end_date, sections_included
- file_url, file_hash (SHA-256), file_size
- generated_at, downloaded_at, download_count
```

**PDF Generation Service:**
```python
services/court_export.py
- Compile messages (with ARIA flags)
- Include agreement (current version)
- Include compliance metrics
- Include payment history
- Add cover page with case summary
- SHA-256 hash for integrity
- Redaction options for sensitive data
```

**Frontend:**
- `/cases/[id]/export` wizard page
- Select date range
- Select sections (messages, agreement, schedule, payments)
- Preview before download
- Generate ZIP with:
  - Main PDF document
  - Individual section PDFs
  - CSV data exports
  - Integrity verification file

**Priority:** HIGH - Differentiator from competitors

---

### **Week 17: Additional V1.1 Features**

#### Legal Access Portal (Week 17)

**Backend:**
```python
# New endpoints
POST   /api/v1/legal-access/invite       # Invite professional
GET    /api/v1/legal-access/case/{id}    # List access grants
PUT    /api/v1/legal-access/{id}/revoke  # Revoke access
GET    /api/v1/legal-access/audit/{id}   # View access log

# legal_access table
- id, case_id, granted_by
- professional_email, professional_type (attorney, gal, mediator)
- access_level (read_only, full_access)
- start_date, expiration_date
- is_active, revoked_at, revoked_by
- bar_number (optional verification)

# legal_access_audit table
- id, access_id, accessed_at
- action_type, resource_type, resource_id
- ip_address, user_agent
```

**Frontend:**
- `/cases/[id]/legal-access` management page
- Invite professional form
- Set access duration (7/30/90 days or custom)
- Set permissions (read-only vs full access)
- View access log table
- Revoke access button
- `/legal-portal` read-only dashboard for professionals

**Priority:** MEDIUM - Unique differentiator

---

#### Email Notifications (Week 17)

**Backend:**
```python
# SendGrid integration
services/notifications.py
services/email.py

# notification_preferences table
- user_id, notification_type
- email_enabled, sms_enabled (future)
- frequency (immediate, daily_digest, weekly)

# Notification types:
1. Case invitation received
2. Agreement needs your approval
3. Agreement approved by other parent
4. Schedule change request
5. Exchange reminder (24hrs before)
6. Exchange reminder (1hr before)
7. Message received
8. Expense request submitted
9. Payment due reminder (child support)
```

**Templates:**
- HTML email templates (responsive)
- Plain text fallback
- Unsubscribe links
- Notification preferences link

**Frontend:**
- `/settings/notifications` preferences page
- Toggle notifications by type
- Set frequency preferences
- Test notification button

**Priority:** HIGH - Critical for user engagement

---

### **Week 18: V1.1 Polish & Launch**

#### Calendar Sync (Optional)

**Backend:**
```python
# Google Calendar API integration
services/calendar_sync.py
integrations/google_calendar.py
integrations/outlook.py

# calendar_sync table
- user_id, provider (google, outlook)
- access_token, refresh_token
- calendar_id, last_sync_at
- sync_enabled, sync_frequency
```

**Frontend:**
- `/schedule/sync` settings page
- Connect Google/Outlook OAuth
- iCal download option (no account needed)
- Sync status and last sync time
- Manual sync button

**Priority:** LOW - Nice to have

---

#### SMS Notifications (Optional)

**Twilio Integration:**
- SMS for critical notifications only:
  - Exchange reminder (1hr before)
  - Missed exchange alert
  - Agreement requires urgent review

**Priority:** LOW - Can wait for V1.2

---

#### Final Polish

- [ ] Performance optimization
  - Database query optimization
  - Frontend bundle size reduction
  - Image optimization
  - Lazy loading components

- [ ] Security audit
  - OWASP top 10 check
  - SQL injection prevention
  - XSS prevention
  - CSRF tokens
  - Rate limiting on APIs

- [ ] Documentation
  - Update API documentation
  - Create user guide
  - Create video tutorials
  - FAQ page

- [ ] Marketing prep
  - Landing page copy finalization
  - Screenshots for marketing
  - Demo video creation
  - Press kit preparation

---

## üéØ Success Criteria

### MVP Polish (Week 13-14)
- [ ] All pages work on mobile
- [ ] No console errors in production
- [ ] All API endpoints return proper errors
- [ ] End-to-end user flow works perfectly
- [ ] Deployed to production with custom domain

### Core V1.1 (Week 15-17)
- [ ] ClearFund tracks payments and expenses
- [ ] Court packages generate PDFs successfully
- [ ] Legal access portal works with time limits
- [ ] Email notifications send for all events
- [ ] 95%+ uptime on production

### Launch Ready (Week 18)
- [ ] Performance: Page load < 2 seconds
- [ ] Security: Passed security audit
- [ ] Documentation: Complete user guide
- [ ] Marketing: Landing page live
- [ ] Support: Help desk ready

---

## üìä Feature Prioritization

### Must Have (Blocking V1.1 launch):
1. ‚úÖ Agreement builder backend integration
2. ‚úÖ Schedule generation from agreements
3. ‚úÖ Production deployment
4. ‚úÖ Email notifications
5. ‚úÖ Court export packages (basic)

### Should Have (Include if time):
1. Payment tracking (ClearFund)
2. Legal access portal
3. Enhanced court exports
4. Mobile responsive polish

### Nice to Have (Can defer to V1.2):
1. Calendar sync
2. SMS notifications
3. Performance optimizations
4. Video tutorials

---

## üöÄ Post-Launch (V1.2+)

Features to build after V1.1 launch:

1. **Mobile Apps** - Native iOS/Android
2. **Advanced Analytics** - Compliance trends, communication patterns
3. **Therapist Matching** - Co-parent therapist directory
4. **Educational Content** - Library of parenting resources
5. **Community Forums** - Moderated peer support
6. **Court E-Filing** - Direct integration with court systems
7. **Multi-language** - Spanish, French support
8. **Voice Messages** - Audio messages with transcription
9. **Emergency SOS** - Quick alert for safety concerns
10. **Calendar AI** - Intelligent schedule suggestions

---

## üìù Notes

- All features should maintain "child-first" philosophy
- Keep UI simple and accessible (8th grade reading level)
- Ensure all features work on mobile
- Maintain neutral tone in all communications
- Document everything for future developers

---

**Last Updated:** December 30, 2025
**Next Review:** Week 14 (after MVP polish complete)
